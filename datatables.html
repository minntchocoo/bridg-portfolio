<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTables - Bridget</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/2.1.5/css/dataTables.dataTables.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="icon" type="image/x-icon" href="assets/img/download.jpg">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/2.1.5/js/dataTables.min.js"></script>
    <link rel="stylesheet" href="assets/css/index.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <style>
        /* Ensure table layout is auto for content fitting */
        tfoot input{
            width: 8rem;
        }
                /* Apply specific widths to each column in both tables using nth-child */
        #table1 th:nth-child(1),
        #table1 td:nth-child(1),
        #table2 th:nth-child(1),
        #table2 td:nth-child(1) {
            width: 15%;
        }

        #table1 th:nth-child(2),
        #table1 td:nth-child(2),
        #table2 th:nth-child(2),
        #table2 td:nth-child(2) {
            width: 15%;
        }

        #table1 th:nth-child(3),
        #table1 td:nth-child(3),
        #table2 th:nth-child(3),
        #table2 td:nth-child(3) {
            width: 10%;
        }

        #table1 th:nth-child(4),
        #table1 td:nth-child(4),
        #table2 th:nth-child(4),
        #table2 td:nth-child(4) {
            width: 5%;
        }

        #table1 th:nth-child(5),
        #table1 td:nth-child(5),
        #table2 th:nth-child(5),
        #table2 td:nth-child(5) {
            width: 15%;
        }

        #table1 th:nth-child(6),
        #table1 td:nth-child(6),
        #table2 th:nth-child(6),
        #table2 td:nth-child(6) {
            width: 15%;
        }

        #table1 th:nth-child(7),
        #table1 td:nth-child(7),
        #table2 th:nth-child(7),
        #table2 td:nth-child(7) {
            width: 20%;
        }
        /* Set td and th to fit their content */
        th, td {
            width: 1%; /* Fit-content style */
        }
    
        /* Custom CSS to center pagination and table information at the top */
        .dt-paging {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        .dt-input {
            margin-right: 12px;
            margin-top: 12px;
        }
    
        /* CSS to highlight the selected row */
        table.dataTable > tbody > tr.selected > * {
            background-color: #718355 !important;
            box-shadow: inset 0 0 0 9999px #718355;
            color: white;
        }
    
        /* Toggle button active state */
        .btn:first-child:active {
            background-color: #718355 !important;
            color: white;
            border-color: #718355 !important;
        }
    
        /* Inactive button state (default) */
        .toggle-vis {
            padding: 0.5rem !important;
            background-color: #6c757d;
            color: white;
        }
    
    </style>
    
</head>
<body>
    
    <section id="section1">
        <div class="container mt-4">
            <div id="toggle-visibility" class="mb-3">
                <div id="tab1-toggles" class="tab-toggles">
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="0">Toggle Name</a>
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="1">Toggle Position</a>
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="2">Toggle Office</a>
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="3">Toggle Age</a>
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="4">Toggle Start date </a>
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="5">Toggle Salary</a>
                    <a href="#" class="toggle-vis btn btn-primary btn-sm" data-column="6">Toggle Department</a>
                </div>
            </div>
            <ul class="nav nav-tabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#tab1" type="button">Table 1</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#tab2" type="button">Table 2</button>
                </li>
            </ul>
            <div class="tab-content mt-2">
                <div class="tab-pane fade show active" id="tab1" role="tabpanel">
                    <table id="table1" class="table table-striped table-bordered" style="width:100% !important">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Position</th>
                                <th>Office</th>
                                <th>Age</th>
                                <th>Start date</th>
                                <th>Salary</th>
                                <th>Department</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Name</th>
                                <th>Position</th>
                                <th>Office</th>
                                <th>Age</th>
                                <th>Start date</th>
                                <th>Salary</th>
                                <th>Department</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <!-- Data will be loaded via DataTables -->
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade" id="tab2" role="tabpanel">
                    <table id="table2" class="table table-striped table-bordered" style="width: 100%">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Position</th>
                                <th>Office</th>
                                <th>Age</th>
                                <th>Start date</th>
                                <th>Salary</th>
                                <th>Department</th>
                            </tr>
                        </thead>
                        <tfoot>
                            <tr>
                                <th>Name</th>
                                <th>Position</th>
                                <th>Office</th>
                                <th>Age</th>
                                <th>Start date</th>
                                <th>Salary</th>
                                <th>Department</th>
                            </tr>
                        </tfoot>
                        <tbody>
                            <!-- Filtered data will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>
            <button id="button" class="btn btn-danger mt-3">Delete Selected Row</button>
        </div>
    </section>
     
    <footer>
        <div class="footer-content">
            <div class="footer-links-container"></div>

                <ul class="footer-links">
                    <li><a href="index.html#section1">Portfolio</a></li>
                    <li><a href="datatables.html">DataTables</a></li>
                </ul>
            </div>
            <div class="social-links">
                <a href="https://www.facebook.com/bridgetnicolette/" target="_blank" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                <a href="https://x.com/lovingthe4rcher" target="_blank" class="social-icon"><i class="fab fa-twitter"></i></a>
                <a href="https://www.instagram.com/swtxtremity_/" target="_blank" class="social-icon"><i class="fab fa-instagram"></i></a>
                <a href="https://linktr.ee/minntbree" target="_blank" class="social-icon"><i class="fas fa-link"></i></a>
                <a href="https://ph.pinterest.com/strawberriwchoco/" target="_blank" class="social-icon"><i class="fa-brands fa-pinterest-p"></i></a>
            </div>
            <div class="contact-info">
                <p><i class="fas fa-envelope"></i> b.nicolettejose@gmail.com</p>
                <p><i class="fas fa-phone"></i> (+639) 73-7890-6529</p>
            </div>
            
        </div>
        
    </footer>
    
    <script>
        window.onload = function() {
             // Trigger the click event for the button with id 'tab2-tab'
             document.getElementById("tab2-tab").click();
         };
 
 
     </script>
    <script>
       $(document).ready(function() {
            var allData = [];
            
            // Load the CSV data
            $.ajax({
                url: './assets/datafiles/data.csv', // Your data.csv file
                dataType: 'text',
                success: function (data) {
                    var rows = data.split('\n');
                    var combinedData = [];
                    var filteredData = [];
                    
                    // Process CSV data
                    for (var i = 1; i < rows.length; i++) { // Skip header row
                        var cells = rows[i].split(',');
                        if (cells.length >= 7) { // Ensure we have enough data for both tables
                            // Push to combinedData (Table 1)
                            combinedData.push(cells);
                            // Filter rows with start date from 1965 for Table 2
                            var startDate = new Date(cells[4]);
                            if (startDate.getFullYear() >= 1965) {
                                filteredData.push(cells);
                            }
                        }
                    }
                    
                    // Initialize DataTables for Table 1 with pagination at the top and no search bar
                    var table1 = $('#table1').DataTable({
                        data: combinedData,
                        columns: [
                            { title: "Name" },
                            { title: "Position" },
                            { title: "Office" },
                            { title: "Age" },
                            { title: "Start date" },
                            { title: "Salary" },
                            { title: "Department" }
                        ],
                        dom: '<"top"p>rt<"bottom"il><"clear">', // Moves pagination to top and entries to bottom, no search bar
                        initComplete: function () {
                            this.api()
                                .columns()
                                .every(function () {
                                    let column = this;
                                    let title = column.footer().textContent;

                                    // Create input element for filtering
                                    let input = document.createElement('input');
                                    input.placeholder = 'Search ' + title;
                                    column.footer().replaceChildren(input);

                                    // Add event listener for search functionality
                                    input.addEventListener('keyup', function () {
                                        if (column.search() !== this.value) {
                                            column.search(this.value).draw();
                                        }
                                    });
                                });
                        }
                    });

                    // Initialize DataTables for Table 2 (Filtered data from 1965 onwards)
                    var table2 = $('#table2').DataTable({
                        data: combinedData,
                        columns: [
                            { title: "Name" },
                            { title: "Position" },
                            { title: "Office" },
                            { title: "Age" },
                            { title: "Start date" },
                            { title: "Salary" },
                            { title: "Department" }
                        ],
                        dom: '<"top"p>rt<"bottom"il><"clear">',
                        initComplete: function () {
                            this.api()
                                .columns()
                                .every(function () {
                                    let column = this;
                                    let title = column.footer().textContent;

                                    // Create input element for filtering
                                    let input = document.createElement('input');
                                    input.placeholder = 'Search ' + title;
                                    column.footer().replaceChildren(input);

                                    // Add event listener for search functionality
                                    input.addEventListener('keyup', function () {
                                        if (column.search() !== this.value) {
                                            column.search(this.value).draw();
                                        }
                                    });
                                });
                        } // Moves pagination to top and entries to bottom, no search bar

                    });

                    // Handle Bootstrap tab change
                    $('button[data-bs-toggle="tab"]').on('shown.bs.tab', function (e) {
                        var target = $(e.target).data('bs-target'); // Get the target tab
                        var table = $(target).find('table').DataTable(); // Get the DataTable instance of the target tab

                        // Adjust columns
                        table.columns.adjust();
                    });

                    // Row click event handler for selecting rows
                    $('#table1 tbody, #table2 tbody').on('click', 'tr', function () {
                        $(this).toggleClass('selected');
                    });

                    // Delete selected row event handler
                    $('#button').on('click', function () {
                        var selectedTable = $('#table1').DataTable().rows('.selected').length ? $('#table1').DataTable() : $('#table2').DataTable();
                        selectedTable.row('.selected').remove().draw(false);
                    });

                      // Delete selected row event handler
                    $('#button').on('click', function () {
                        var selectedTable = $('#table2').DataTable().rows('.selected').length ? $('#table1').DataTable() : $('#table2').DataTable();
                        selectedTable.row('.selected').remove().draw(false);
                    });
                    $('#button').on('click', function () {
                        var table2 = $('#table2').DataTable();
                        // Remove selected rows from table2
                        table2.rows('.selected').remove().draw(false);
                    });


                    // Toggle column visibility
                    $('.toggle-vis').on('click', function (e) {
                        e.preventDefault();
                        var columnIdx = $(this).data('column');
                        var target = $('.nav-tabs .active').attr('id') === 'tab1-tab' ? '#table1' : '#table2';
                        var table = $(target).DataTable();

                        // Toggle the visibility
                        table.column(columnIdx).visible(!table.column(columnIdx).visible());
                    });
                }
            });
        });

    </script>
    
</body>
</html>
